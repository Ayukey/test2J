<div class="layui-layout layui-layout-admin" style="padding-left: 20px;">
    <table class="layui-hide" id="table_list" lay-filter="table_filter">
    </table>

    <input type="hidden" id="id" name="id" value="{{.Source.id}}">
</div>
<script>
    layui.use(['table', 'form', 'element', 'jquery'], function () {
        var table = layui.table;
        var form = layui.form;
        var element = layui.element;
        var $ = layui.jquery;

        //方法级渲染
        table.render({
            elem: '#table_list',
            url: '/DepartmentInfo/MembersTable?id=' + $('#id').val(),
            cols: [
                [{
                    field: 'id',
                    title: 'ID',
                    align: 'center',
                    sort: true,
                    width: '20%'
                }, {
                    field: 'account',
                    align: 'center',
                    title: '工号',
                    width: '20%'
                }, {
                    field: 'name',
                    align: 'center',
                    title: '姓名',
                    width: '20%'
                }, {
                    field: 'phone',
                    align: 'center',
                    title: '手机号',
                    width: '20%'
                }, {
                    field: 'role',
                    align: 'center',
                    title: '角色',
                    width: '20%'
                }]
            ],
            limit: 20,
            limits: [20, 40, 60],
            id: 'listReload',
            page: true,
            height: "full-130"
        });

        var $ = layui.$,
            active = {
                reload: function () {
                    table.reload('listReload', {
                        where: {
                            apiName: $('#apiName').val(),
                            status: $("#status").val()
                        }
                    });
                }
            };


        $('.demoTable .layui-btn').on('click', function () {
            var type = $(this).data('type');
            active[type] ? active[type].call(this) : '';
        });
    });
</script>